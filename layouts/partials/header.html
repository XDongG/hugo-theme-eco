<header class="site-header">
    <nav class="navbar">
        <div class="nav-container">
            <!-- Logo/Brand -->
            <div class="nav-brand">
                <a href="{{ .Site.BaseURL }}" class="brand-link">
                    {{ if .Site.Params.logo }}
                    <img src="{{ .Site.Params.logo }}" alt="{{ .Site.Title }}" class="brand-logo">
                    {{ else }}
                    <span class="brand-text">{{ .Site.Title }}</span>
                    {{ end }}
                </a>
            </div>

            <!-- Mobile menu toggle -->
            <button class="mobile-toggle" id="mobile-toggle" aria-label="Toggle navigation">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>

            <!-- Navigation Menu -->
            <div class="nav-menu" id="nav-menu">
                <ul class="nav-list">
                    {{range .Site.Menus.main}}
                    <li class="nav-item">
                        <a href="{{ .URL | relURL }}" class="nav-link {{ if or (eq .URL $.RelPermalink) (and $.IsHome (eq .URL "/")) }}active{{ end }}">
                            {{if .Pre}}
                                <i class={{.Pre}}></i>
                            {{end}}
                            <span>{{ i18n .Name }}</span>
                        </a>
                    </li>
                    {{end}}
                </ul>

                <!-- Utilities -->
                <div class="nav-utilities">
                    <!-- Search -->
                    <button class="utility-btn search-toggle" id="search-toggle" aria-label="Search">
                        <i class="fas fa-search"></i>
                    </button>

                    <!-- Language Switcher -->
                    {{ if hugo.IsMultilingual }}
                    <div class="language-switcher">
                        <button class="utility-btn language-toggle" id="language-toggle" aria-label="Language">
                            <i class="fas fa-globe"></i>
                        </button>
                        <div class="language-menu" id="language-menu">
                            {{ range .Site.Languages }}
                            <a href="{{ .Lang | relURL }}" 
                               class="language-option {{ if eq .Lang $.Site.Language.Lang }}active{{ end }}">
                                {{ .LanguageName }}
                            </a>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}

                    <!-- Dark Mode Toggle -->
                    <button class="utility-btn theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
                        <i class="fas fa-moon dark-icon"></i>
                        <i class="fas fa-sun light-icon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Search Overlay -->
    <div class="search-overlay" id="search-overlay">
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="search-input" placeholder="{{ i18n "search_placeholder" }}" autocomplete="off">
                <button class="search-close" id="search-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="search-results" id="search-results"></div>
        </div>
    </div>
</header>

